import * as React from "react";
import useLang from "../../Hooks/useLang";
import {
  MenuItem,
  Box,
  FormControl,
  Select,
  Avatar,
  Typography,
  Stack,
} from "@mui/material";

export default function LangDropdown() {
  const { langHub, changeLang, currentLang } = useLang();
  const [selectedLang, setSelectedLang] = React.useState(currentLang);

  const handleChange = (event) => {
    const newLang = event.target.value;
    setSelectedLang(newLang);
    changeLang(newLang);
    localStorage.setItem("lang", newLang);
  };

  return (
    <Box sx={{ minWidth: 80 }}>
      <FormControl fullwidth>
        <Select
          value={selectedLang}
          label="Lang"
          onChange={handleChange}
          sx={{
            ".MuiOutlinedInput-notchedOutline": { border: 0 },
            "&.Mui-focused .MuiOutlinedInput-notchedOutline": { border: 0 },
            color: "white",
          }}
        >
          {langHub.map((item) => {
            return (
              <MenuItem key={item.label} value={item.label}>
                <Stack
                  direction="row"
                  spacing={2}
                  sx={{
                    alignItems: "center",
                  }}
                >
                  <Avatar alt="en/tr" src={item.icon} />
                  <Typography
                    variant="h5"
                    sx={{
                      textTransform: "uppercase",
                      fontSize: "16px",
                      fontFamily: "'Public Sans', sans-serif",
                    }}
                  >
                    {item.label}
                  </Typography>
                </Stack>
              </MenuItem>
            );
          })}
        </Select>
      </FormControl>
    </Box>
  );
}
