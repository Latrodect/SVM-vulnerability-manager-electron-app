import React, { lazy } from "react";
import { useRoutes } from "react-router-dom";
import Loader from "../Components/Spinner/EnhancedLoader";
import AppLayout from "../Components/Layouts/AppLayout";
import AuthGuard from "../Components/AuthGuard/AuthGuard";
import { PATHS } from "./paths";

export default function AppRoutes() {
  return useRoutes([
    { path: PATHS.auth.signIn, element: <SignIn /> },
    {
      path: PATHS.main,
      element: (
        <AuthGuard>
          <AppLayout />
        </AuthGuard>
      ),
      children: [
        { path: PATHS.dashboard, element: <DashboardPage /> },
        { path: PATHS.subdomain, element: <SubdomainPage /> },
      ],
    },
  ]);
}

const SignIn = Loader(
  lazy(() => import("../Pages/AuthenticationPage/AuthenticationPage"))
);
const DashboardPage = Loader(
  lazy(() => import("../Pages/Dashboard/DashboardPage"))
);
const SubdomainPage = Loader(
  lazy(() => import("../Pages/Subdomain/SubdomainPage"))
);
